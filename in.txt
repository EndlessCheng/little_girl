import urllib2  

response = urllib2.urlopen('http://www.bilibili.com/online.html')  
html = response.read()  

STEP = 20
cnt = next = 1
while True:
    end = html.find('</h3>', next, len(html)) #获取repolist-name尾位置
    if(end == -1):
        break
    next = end + STEP
    end = html.rfind('</a>', 0, end) 
    begin = html.rfind('>', 0, end) + 1
    print "%3d  %s" % (cnt, html[begin:end])
    cnt += 1